<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blender - VivaSmart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="assets/css/product-details-5.css" />
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-4">
    <a class="navbar-brand" href="index.html">VivaSmart</a>
    <div class="ms-auto">
      <a href="cart.html" class="text-white"><i class="fas fa-shopping-cart"></i> Cart</a>
    </div>
  </nav>

  <!-- Product Detail Section -->
  <div class="container my-5">
    <div class="row align-items-center product-box animate">
      <div class="col-md-6">
        <div id="carouselProduct5" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner rounded">
            <div class="carousel-item active">
              <img src="assets/images/blender01.jpg" class="d-block w-100" alt="Blender Front">
            </div>
            <div class="carousel-item">
              <img src="assets/images/blender02.jpg" class="d-block w-100" alt="Blender Side">
            </div>
            <div class="carousel-item">
              <img src="assets/images/blender03.jpg" class="d-block w-100" alt="Blender Use">
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselProduct5" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselProduct5" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
          </button>
        </div>
      </div>

      <div class="col-md-6 mt-4 mt-md-0">
        <h2>Blender</h2>
        <p class="price">₦22,000</p>
        <p class="description">
          Make smoothies, soups, and more with this powerful blender. Designed for durability and speed, it’s a must-have for every modern kitchen.
        </p>
        <button onclick="addToCart()" class="btn btn-dark w-100">
          <i class="fas fa-cart-plus"></i> Add to Cart
        </button>
      </div>
    </div>

    <!-- Review Section -->
    <div class="mt-5">
      <h4>Customer Reviews (<span id="review-count">0</span>)</h4>
      <div id="average-rating" class="mb-2 text-warning fs-5"></div>
      <div id="review-list" class="mb-4"></div>

      <h5>Leave a Review</h5>
      <form onsubmit="submitReview(event)">
        <div class="mb-2">
          <input type="text" id="reviewer" class="form-control" placeholder="Your name" required />
        </div>
        <div class="mb-2">
          <textarea id="comment" class="form-control" placeholder="Write your review..." required></textarea>
        </div>
        <div class="mb-2">
          <label>Rating: </label>
          <select id="rating" class="form-select w-auto d-inline">
            <option value="5">5 ★</option>
            <option value="4">4 ★</option>
            <option value="3">3 ★</option>
            <option value="2">2 ★</option>
            <option value="1">1 ★</option>
          </select>
        </div>
        <button type="submit" class="btn btn-secondary">Submit Review</button>
      </form>
    </div>
  </div>

  <!-- Add to Cart + Review Script -->
  <script>
    const PRODUCT_ID = 5;
    const REVIEW_KEY = "reviews_" + PRODUCT_ID;

    function addToCart() {
      const product = {
        id: PRODUCT_ID,
        name: "Blender",
        price: 22000,
        image: "assets/images/blender01.jpg",
        quantity: 1
      };

      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      const existing = cart.find(item => item.id === product.id);
      if (existing) {
        existing.quantity += 1;
      } else {
        cart.push(product);
      }

      localStorage.setItem("cart", JSON.stringify(cart));
      alert("Blender added to cart!");
    }

    function loadReviews() {
      const reviews = JSON.parse(localStorage.getItem(REVIEW_KEY)) || [];
      const list = document.getElementById("review-list");
      const count = document.getElementById("review-count");
      const avgRatingEl = document.getElementById("average-rating");

      count.textContent = reviews.length;
      list.innerHTML = "";

      if (reviews.length === 0) {
        avgRatingEl.textContent = "No ratings yet.";
        return;
      }

      const avg = reviews.reduce((sum, r) => sum + r.rating, 0) / reviews.length;
      avgRatingEl.textContent = "★".repeat(Math.round(avg)) + "☆".repeat(5 - Math.round(avg));

      reviews.reverse().forEach(r => {
        const div = document.createElement("div");
        div.className = "border p-2 mb-2 bg-light";
        div.innerHTML = `
          <strong>${r.name}</strong> - ${"★".repeat(r.rating)}${"☆".repeat(5 - r.rating)}<br/>
          <small>${new Date(r.date).toLocaleString()}</small><br/>
          <p>${r.comment}</p>
        `;
        list.appendChild(div);
      });
    }

    function submitReview(e) {
      e.preventDefault();
      const name = document.getElementById("reviewer").value.trim();
      const comment = document.getElementById("comment").value.trim();
      const rating = parseInt(document.getElementById("rating").value);

      if (!name || !comment || rating < 1 || rating > 5) return;

      const reviews = JSON.parse(localStorage.getItem(REVIEW_KEY)) || [];
      reviews.push({
        name,
        comment,
        rating,
        date: new Date().toISOString()
      });

      localStorage.setItem(REVIEW_KEY, JSON.stringify(reviews));
      document.getElementById("reviewer").value = "";
      document.getElementById("comment").value = "";
      document.getElementById("rating").value = "5";

      loadReviews();
    }

    document.addEventListener("DOMContentLoaded", loadReviews);
  </script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
<!-- End of HTML Document -->
<!-- This code creates a product details page for a blender with a carousel for images, a review section, and an add to cart functionality. -->   